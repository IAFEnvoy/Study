<!DOCTYPE html>

<head>
    <title>上海高考文言文300实词自测</title>
</head>

<body>
    <h1>上海高考文言文300实词自测</h1>
    <div id="question"></div>
    <input id="ans" placeholder="输入你的答案..."></input>
    <button onclick="check()">批改</button>
    <button onclick="next()">下一个</button>
    <div id="answer"></div>
    <script>
        let data = null, currentIndex = -1;
        window.onload = async () => {
            data = await fetch('https://' + window.location.host + '/data/test.json').then(res => res.json())
        }
        const check = () => {
            let num = currentIndex;
            while (data[num][3] == null) num--;
            document.getElementById('answer').innerText = document.getElementById('ans').value == data[num][3] ? '√' : '×';
            document.getElementById('answer').innerText += '正确答案：' + data[num][3]
        }
        const next = () => {
            currentIndex = Math.floor(Math.random() * data.length);
            let num = currentIndex, res = data[currentIndex][4] + ' ' + data[currentIndex][5];
            while (data[num][1] == null) num--;
            document.getElementById('question').innerText = data[num][1] + ' ' + res;
        }
    </script>
</body>